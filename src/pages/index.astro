---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import TermCard from "../components/TermCard.astro";
import SearchBox from "../components/SearchBox";
import RandomTermButton from "../components/RandomTermButton";

// Fetch all terms
const allTerms = await getCollection("terms");
---

<Layout title="Eli5Dev - Tech Terms Simplified">
  <main class="container mx-auto px-4 py-8">
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-bold mb-2 bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent">
        Eli5Dev
      </h1>
      <p class="text-xl text-gray-600 dark:text-gray-400">Tech terms explained simply for new developers</p>
    </div>

    <div class="flex flex-col sm:flex-row justify-center items-center gap-4 mb-12 px-4">
      <SearchBox client:load terms={allTerms} />
      <RandomTermButton client:load terms={allTerms} />
    </div>

    <div id="randomTermContainer" class="max-w-3xl mx-auto mb-12 px-4">
      <!-- Random term will be displayed here by the RandomTermButton component -->
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 px-4">
      {allTerms.map((term) => (
        <TermCard
          title={term.data.title}
          description={term.data.description}
          slug={term.slug}
          tags={term.data.tags || []}
        />
      ))}
    </div>
  </main>
</Layout>

<style>
  main {
    min-height: 100vh;
  }
</style>
